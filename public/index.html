<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HJS Responsibility Protocol</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&family=JetBrains+Mono:wght@400;500;600&display=swap');
        * { font-family: 'Inter', system-ui, sans-serif; }
        .font-mono, code, pre { font-family: 'JetBrains Mono', monospace !important; }
        body { background: #0a0a0a; color: #e5e5e5; }
        .text-steel { color: #3B4B5C; }
        .border-steel { border-color: #3B4B5C; }
        .bg-steel\/10 { background-color: rgba(59, 75, 92, 0.1); }
        .bg-steel\/20 { background-color: rgba(59, 75, 92, 0.2); }
        .hover\:bg-steel\/20:hover { background-color: rgba(59, 75, 92, 0.2); }
        .bg-card { background: rgba(26, 26, 26, 0.5); }
        .border-border { border-color: #1f1f1f; }
        .text-muted-foreground { color: #9ca3af; }
        .text-foreground { color: #e5e5e5; }
        .bg-background { background: #0a0a0a; }
        .hover\:border-steel:hover { border-color: #3B4B5C; }
        .hover\:text-foreground:hover { color: #e5e5e5; }
        
        /* Âä®Áîª */
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        .animate-spin {
            animation: spin 1s linear infinite;
        }
        
        .test-input { background: #1a1a1a; border: 1px solid #333; color: white; }
        .test-input:focus { border-color: #5ee0c0; outline: none; }
    </style>
</head>
<body>
    <div class="mx-auto max-w-4xl px-6 pt-12 pb-12">
        <!-- ===== ÂØºËà™Ê†è ===== -->
        <div class="flex justify-between items-center py-6 text-base">
            <div class="text-white font-semibold text-lg">HJS</div>
            <div class="flex gap-8 md:gap-10 text-gray-400">
                <a href="/" class="text-white" data-i18n="nav_home">Home</a>
                <a href="/product.html" class="hover:text-teal-400 transition" data-i18n="nav_product">Product</a>
                <a href="/developers.html" class="hover:text-teal-400 transition" data-i18n="nav_developers">Developers</a>
                <a href="/console.html" class="hover:text-teal-400 transition" data-i18n="nav_console">Console</a>
                <a href="/lookup.html" class="hover:text-teal-400 transition" data-i18n="nav_lookup">Lookup</a>
                <a href="/billing.html" class="hover:text-teal-400 transition" data-i18n="nav_billing">Billing</a>
                <a href="/governance.html" class="hover:text-teal-400 transition" data-i18n="nav_governance">Governance</a>
            </div>
            <select onchange="switchLang(this.value)" class="bg-transparent text-gray-400 text-xs">
                <option value="en">EN</option>
                <option value="zh">‰∏≠Êñá</option>
            </select>
        </div>

        <!-- ===== Á¨¨‰∏ÄÂ±èÔºöÂè™ÊòæÁ§∫Ê†áÈ¢ò ===== -->
        <section class="min-h-[calc(100vh-8rem)] flex flex-col justify-center py-16">
            <p class="mb-4 font-mono text-xs text-gray-500" data-i18n="home_version_tag">
                HJS Responsibility Protocol ¬∑ v1.0 Beta
            </p>
            <h1 class="text-3xl font-light leading-tight tracking-tight text-white md:text-4xl max-w-3xl" data-i18n="home_headline">
                A minimal deterministic structure<br>for binding responsibility in AI systems
            </h1>
        </section>

        <hr class="border-gray-800">

        <!-- ===== Á¨¨‰∫åÂ±èÔºöÂõõÈ°πÂéüËØ≠Ê®°ÂûãÂõæ ===== -->
        <section class="py-24">
            <div class="font-mono text-sm leading-loose text-gray-400">
                <div class="flex flex-col items-start">
                    <span class="text-white" data-i18n="diagram_actor">Actor</span>
                    <span class="ml-2 text-steel" aria-hidden="true">‚îÇ</span>
                    <span class="ml-2 text-steel" aria-hidden="true">‚ñº</span>
                    <span class="text-white" data-i18n="diagram_judgment">Judgment</span>
                    <span class="ml-2 text-steel" aria-hidden="true">‚îÇ</span>
                    <span class="ml-2 text-steel" aria-hidden="true">‚ñº</span>
                    <div class="flex items-start gap-8">
                        <div class="flex flex-col items-start">
                            <span class="text-gray-500" data-i18n="diagram_delegation">Delegation (OPTIONAL)</span>
                            <span class="ml-2 text-steel" aria-hidden="true">‚îÇ</span>
                        </div>
                        <div class="flex flex-col items-start">
                            <span class="text-gray-500" data-i18n="diagram_termination">Termination (OPTIONAL)</span>
                            <span class="ml-2 text-steel" aria-hidden="true">‚îÇ</span>
                        </div>
                    </div>
                    <span class="ml-2 text-steel" aria-hidden="true">‚ñº    ‚ñº</span>
                    <span class="text-white mt-1" data-i18n="diagram_verification">Verification</span>
                    <span class="ml-2 text-steel" aria-hidden="true">‚îÇ</span>
                    <span class="ml-2 text-steel" aria-hidden="true">‚ñº</span>
                    <span class="text-gray-500" data-i18n="diagram_integrity">Integrity Proof (OPTIONAL)</span>
                </div>

                <div class="mt-8 max-w-lg space-y-1 text-xs text-gray-500">
                    <p data-i18n="home_diagram_note1">Each arrow defines a structural invariant.</p>
                    <p data-i18n="home_diagram_note2">All primitives are deterministic and verifiable.</p>
                    <p class="text-steel mt-3 font-mono text-xs">Judgment ¬∑ Delegation ¬∑ Termination ¬∑ Verification</p>
                </div>
            </div>
        </section>

        <hr class="border-gray-800">

        <!-- ===== Á¨¨‰∏âÂ±èÔºöÂÆö‰πâÊëòË¶Å ===== -->
        <section class="py-24">
            <p class="text-sm text-gray-500" data-i18n="home_def_intro">
                The protocol defines four primitives:
            </p>

            <div class="mt-10 space-y-10">
                <!-- Judgment -->
                <div>
                    <h3 class="font-mono text-sm font-medium text-white" data-i18n="prim_judgment">Judgment</h3>
                    <div class="mt-2 space-y-1 text-sm text-gray-400">
                        <p data-i18n="prim_judgment_must">MUST include actor and timestamp.</p>
                        <p data-i18n="prim_judgment_may">MAY include context and delegation reference.</p>
                    </div>
                </div>

                <!-- Delegation -->
                <div>
                    <h3 class="font-mono text-sm font-medium text-white" data-i18n="prim_delegation">Delegation</h3>
                    <div class="mt-2 space-y-1 text-sm text-gray-400">
                        <p data-i18n="prim_delegation_must">MUST reference a prior Judgment.</p>
                        <p data-i18n="prim_delegation_may">MAY define scope and expiry.</p>
                    </div>
                </div>

                <!-- Termination -->
                <div>
                    <h3 class="font-mono text-sm font-medium text-white" data-i18n="prim_termination">Termination</h3>
                    <div class="mt-2 space-y-1 text-sm text-gray-400">
                        <p data-i18n="prim_termination_must">MUST reference a valid Judgment or Delegation.</p>
                        <p data-i18n="prim_termination_def">Defines the end of responsibility.</p>
                    </div>
                </div>

                <!-- Verification -->
                <div>
                    <h3 class="font-mono text-sm font-medium text-white" data-i18n="prim_verification">Verification</h3>
                    <div class="mt-2 space-y-1 text-sm text-gray-400">
                        <p data-i18n="prim_verification_eval">Evaluates structural validity, delegation chain, termination status.</p>
                        <p data-i18n="prim_verification_output">Output is deterministic: VALID or INVALID.</p>
                    </div>
                </div>
            </div>
        </section>

        <hr class="border-gray-800">

        <!-- ===== Á¨¨ÂõõÂ±èÔºöÂÆûÁé∞ÂÖ•Âè£ + Âø´ÈÄüÊµãËØï ===== -->
        <section class="py-24">
            <div class="max-w-2xl space-y-4 text-sm leading-relaxed text-gray-400">
                <p data-i18n="home_impl_p1">HJS provides a hosted reference implementation.</p>
                <p class="text-white" data-i18n="home_impl_p2">This service executes the protocol.</p>
                <p data-i18n="home_impl_p3">You MAY implement the protocol independently.</p>
                <p data-i18n="home_impl_p4">The specification is open and publicly available.</p>
            </div>

            <!-- Âø´ÈÄüÊµãËØïÂå∫ÂüüÔºàÁúüÂÆûAPIÔºâ -->
            <div class="mt-12 p-6 border border-gray-800 bg-card rounded">
                <h3 class="text-lg font-light text-white mb-4" data-i18n="quick_test">Quick Test</h3>
                <div class="grid md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-xs text-gray-500 mb-1" data-i18n="test_email">Email</label>
                        <input type="email" id="test-email" placeholder="your@email.com" 
                               class="w-full border border-gray-800 bg-background px-3 py-2 text-sm text-white placeholder:text-gray-600 outline-none focus:border-steel rounded">
                    </div>
                    <div class="flex items-end">
                        <button id="generate-test-key" 
                                class="w-full border border-steel bg-steel/10 px-4 py-2 text-sm text-steel hover:bg-steel/20 rounded">
                            Generate Test Key
                        </button>
                    </div>
                </div>
                <div id="test-key-result" class="mt-3 text-xs text-gray-400"></div>
            </div>

            <!-- ÊåâÈíÆ -->
            <div class="mt-12 flex flex-wrap gap-3">
                <a href="/spec/README.md" class="inline-flex items-center justify-center border border-steel px-5 py-2.5 text-sm text-white transition-colors hover:bg-steel/10" data-i18n="home_btn_spec">
                    View Specification
                </a>
                <a href="/console.html" class="inline-flex items-center justify-center border border-gray-700 px-5 py-2.5 text-sm text-gray-400 transition-colors hover:border-steel hover:text-white" data-i18n="home_btn_record">
                    Start Recording
                </a>
                <a href="/lookup.html" class="inline-flex items-center justify-center border border-gray-700 px-5 py-2.5 text-sm text-gray-400 transition-colors hover:border-steel hover:text-white" data-i18n="home_btn_verify">
                    Verify Record
                </a>
            </div>
        </section>

        <!-- ===== Â∫ïÈÉ® ===== -->
        <div class="text-center text-xs text-gray-600 pt-10 border-t border-gray-800 mt-12">
            <a href="https://github.com/schchit/hjs-api" class="hover:text-gray-400 mx-2">GitHub</a>
            <span class="text-gray-700">¬∑</span>
            <a href="/spec/README.md" class="hover:text-gray-400 mx-2">Spec</a>
            <span class="text-gray-700">¬∑</span>
            <a href="/cases.html" class="hover:text-gray-400 mx-2">Cases</a>
        </div>
    </div>

    <!-- ===== ÂÖ®Â±ÄËØ≠Ë®ÄÂ±Ç ===== -->
    <script src="/js/lang.js"></script>
    <script>
        const API_BASE = 'https://hjs-api.onrender.com';

        document.getElementById('generate-test-key')?.addEventListener('click', async () => {
            const email = document.getElementById('test-email').value;
            const resultDiv = document.getElementById('test-key-result');
            
            if (!email || !email.includes('@')) {
                resultDiv.textContent = '‚ùå Please enter a valid email';
                return;
            }
            
            resultDiv.textContent = '‚è≥ Generating...';
            
            try {
                const res = await fetch(`${API_BASE}/developer/keys`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ email, name: 'quick-test' })
                });
                const data = await res.json();
                
                if (data.key) {
                    const shortKey = data.key.substring(0, 8) + '...' + data.key.substring(56);
                    resultDiv.innerHTML = `
                        <div class="flex items-center gap-2 flex-wrap">
                            <span>‚úÖ Key generated:</span>
                            <code class="bg-gray-900 px-2 py-1 rounded text-teal-400 font-mono">${shortKey}</code>
                            <button onclick="copyToClipboard('${data.key}', this)" class="px-2 py-1 bg-teal-600 hover:bg-teal-700 text-white text-xs rounded flex items-center gap-1">
                                <span>üìã</span>
                                <span class="copy-text">Copy</span>
                            </button>
                        </div>
                    `;
                } else {
                    resultDiv.textContent = '‚ùå Failed to generate key';
                }
            } catch (err) {
                resultDiv.textContent = '‚ùå Error: ' + err.message;
            }
        });

        // Copy to clipboard function
        async function copyToClipboard(text, btn) {
            try {
                await navigator.clipboard.writeText(text);
                const btnText = btn.querySelector('.copy-text');
                btnText.textContent = 'Copied!';
                setTimeout(() => {
                    btnText.textContent = 'Copy';
                }, 2000);
            } catch (err) {
                console.error('Copy failed:', err);
                alert('Copy failed: ' + text);
            }
        }

        const translations = {
            en: {
                nav_home: "Home",
                nav_product: "Product",
                nav_developers: "Developers",
                nav_console: "Console",
                nav_lookup: "Lookup",
                nav_billing: "Billing",
                nav_governance: "Governance",
                home_version_tag: "HJS Responsibility Protocol ¬∑ v1.0 Beta",
                home_headline: "A minimal deterministic structure<br>for binding responsibility in AI systems",
                diagram_actor: "Actor",
                diagram_judgment: "Judgment",
                diagram_delegation: "Delegation (OPTIONAL)",
                diagram_termination: "Termination (OPTIONAL)",
                diagram_verification: "Verification",
                diagram_integrity: "Integrity Proof (OPTIONAL)",
                home_diagram_note1: "Each arrow defines a structural invariant.",
                home_diagram_note2: "All primitives are deterministic and verifiable.",
                home_def_intro: "The protocol defines four primitives:",
                prim_judgment: "Judgment",
                prim_judgment_must: "MUST include actor and timestamp.",
                prim_judgment_may: "MAY include context and delegation reference.",
                prim_delegation: "Delegation",
                prim_delegation_must: "MUST reference a prior Judgment.",
                prim_delegation_may: "MAY define scope and expiry.",
                prim_termination: "Termination",
                prim_termination_must: "MUST reference a valid Judgment or Delegation.",
                prim_termination_def: "Defines the end of responsibility.",
                prim_verification: "Verification",
                prim_verification_eval: "Evaluates structural validity, delegation chain, termination status.",
                prim_verification_output: "Output is deterministic: VALID or INVALID.",
                home_impl_p1: "HJS provides a hosted reference implementation.",
                home_impl_p2: "This service executes the protocol.",
                home_impl_p3: "You MAY implement the protocol independently.",
                home_impl_p4: "The specification is open and publicly available.",
                home_btn_spec: "View Specification",
                home_btn_record: "Start Recording",
                home_btn_verify: "Verify Record",
                quick_test: "Quick Test",
                test_email: "Email"
            },
            zh: {
                nav_home: "È¶ñÈ°µ",
                nav_product: "‰∫ßÂìÅ",
                nav_developers: "ÂºÄÂèëËÄÖ",
                nav_console: "ÊéßÂà∂Âè∞",
                nav_lookup: "Êü•ËØ¢",
                nav_billing: "ËÆ°Ë¥π",
                nav_governance: "Ê≤ªÁêÜ",
                home_version_tag: "HJS Ë¥£‰ªªÂçèËÆÆ ¬∑ v1.0 Beta",
                home_headline: "‰∏∫ AI Á≥ªÁªüÁªëÂÆöË¥£‰ªªÁöÑ<br>ÊúÄÂ∞èÁ°ÆÂÆöÊÄßÁªìÊûÑ",
                diagram_actor: "Ë°å‰∏∫ËÄÖ",
                diagram_judgment: "Âà§Êñ≠",
                diagram_delegation: "ÊéàÊùÉÔºàÂèØÈÄâÔºâ",
                diagram_termination: "ÁªàÊ≠¢ÔºàÂèØÈÄâÔºâ",
                diagram_verification: "È™åËØÅ",
                diagram_integrity: "ÂÆåÊï¥ÊÄßËØÅÊòéÔºàÂèØÈÄâÔºâ",
                home_diagram_note1: "ÊØè‰∏™ÁÆ≠Â§¥ÂÆö‰πâ‰∏Ä‰∏™ÁªìÊûÑ‰∏çÂèòÈáè",
                home_diagram_note2: "ÊâÄÊúâÂéüËØ≠ÈÉΩÊòØÁ°ÆÂÆöÊÄßÁöÑ‰∏îÂèØÈ™åËØÅ",
                home_def_intro: "ÂçèËÆÆÂÆö‰πâ‰∫ÜÂõõ‰∏™ÂéüËØ≠Ôºö",
                prim_judgment: "Âà§Êñ≠",
                prim_judgment_must: "ÂøÖÈ°ªÂåÖÂê´Ë°å‰∏∫ËÄÖÂíåÊó∂Èó¥Êà≥",
                prim_judgment_may: "ÂèØÂåÖÂê´‰∏ä‰∏ãÊñáÂíåÊéàÊùÉÂºïÁî®",
                prim_delegation: "ÊéàÊùÉ",
                prim_delegation_must: "ÂøÖÈ°ªÂºïÁî®‰∏Ä‰∏™ÂÖàÂâçÁöÑÂà§Êñ≠",
                prim_delegation_may: "ÂèØÂÆö‰πâËåÉÂõ¥ÂíåÊúâÊïàÊúü",
                prim_termination: "ÁªàÊ≠¢",
                prim_termination_must: "ÂøÖÈ°ªÂºïÁî®‰∏Ä‰∏™ÊúâÊïàÁöÑÂà§Êñ≠ÊàñÊéàÊùÉ",
                prim_termination_def: "ÂÆö‰πâË¥£‰ªªÁöÑÁªìÊùü",
                prim_verification: "È™åËØÅ",
                prim_verification_eval: "ËØÑ‰º∞ÁªìÊûÑÊúâÊïàÊÄß„ÄÅÊéàÊùÉÈìæ„ÄÅÁªàÊ≠¢Áä∂ÊÄÅ",
                prim_verification_output: "ËæìÂá∫ÊòØÁ°ÆÂÆöÊÄßÁöÑÔºöÊúâÊïàÊàñÊó†Êïà",
                home_impl_p1: "HJS Êèê‰æõÊâòÁÆ°ÁöÑÂèÇËÄÉÂÆûÁé∞",
                home_impl_p2: "ËØ•ÊúçÂä°ÊâßË°åÂçèËÆÆ",
                home_impl_p3: "‰Ω†ÂèØ‰ª•Áã¨Á´ãÂÆûÁé∞ËØ•ÂçèËÆÆ",
                home_impl_p4: "ËßÑËåÉÊòØÂºÄÊîæ‰∏îÂÖ¨ÂºÄÂèØÁî®ÁöÑ",
                home_btn_spec: "Êü•ÁúãËßÑËåÉ",
                home_btn_record: "ÂºÄÂßãËÆ∞ÂΩï",
                home_btn_verify: "È™åËØÅËÆ∞ÂΩï",
                quick_test: "Âø´ÈÄüÊµãËØï",
                test_email: "ÈÇÆÁÆ±"
            }
        };

        function switchLang(lang) {
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                if (translations[lang] && translations[lang][key]) {
                    el.innerHTML = translations[lang][key];
                }
            });
            const select = document.querySelector('select');
            if (select) select.value = lang;
        }

        (function() {
            const savedLang = localStorage.getItem('hjs_lang');
            const urlParams = new URLSearchParams(window.location.search);
            const urlLang = urlParams.get('lang');
            const lang = savedLang || urlLang || 'en';
            switchLang(lang);
        })();
    </script>
</body>
</html>